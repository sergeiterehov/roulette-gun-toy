# Детка Рулетка

Игра в рулетку в одном девайсе.

![Фотография прототипа](doc/prototype_photo.jpg)

## Архитектура

Проект написан на MicroPython.

Точка входа - `boot.py`. В этом скрипте создаются подключения к периферии и выполняется инициализация моделей.

Игровая логика описана в `game.py`. Модель включает в себя несколько вложенных.

Используется кастомный способ хранения русских шрифтов. Они описаны в `font.py`. Для их корректной отрисовки в `sh1107.py` добавлен метод `text_area()`.

> Некоторые вещи остаются сделанными на коленке.

## Корпус (в процессе)

Разрабатывается в https://cad.onshape.com

## ПРОБЛЕМЫ

- Как прерывать задачи в asyncio?
Метод из примера не работает в плеере.
Из-за этой ошибки не удается прерывать играющее аудио.
- Перестал работать модуль DFPlayer. Скорей всего это электрическая проблема конкретно.

## Инструменты

### Live Reload

Следит за изменениями py-файлов и выполняет автоматическую загрузку на устройство. После загрузки, код перезагружается.

`node scripts/live-reload.js -p /dev/cu.usbmodem1234561`

### Продолжительность аудио

Измеряет продолжительность аудио-дорожек.

`sh scripts/durations.sh`

## Reference

Вдохновлено Buckshot Roulette ❤️
