from sysfont import sysfont


# Диапазоны русских символов
font_cyrillic = [
    # start_code, end_code, data
    [1041, 1041, bytearray([0x7f,0x49,0x49,0x49,0x31])],
    [1043, 1044, bytearray([0x7f,0x1,0x1,0x1,0x1,0xc0,0x7e,0x41,0x7f,0xc0])],
    [1046, 1049, bytearray([0x77,0x8,0x7f,0x8,0x77,0x22,0x41,0x49,0x49,0x36,0x7f,0x20,0x10,0x8,0x7f,0x7f,0x20,0x11,0x8,0x7f])],
    [1051, 1051, bytearray([0x40,0x3e,0x1,0x1,0x7f])],
    [1055, 1055, bytearray([0x7f,0x1,0x1,0x1,0x7f])],
    [1059, 1060, bytearray([0x27,0x48,0x48,0x48,0x3f,0x1c,0x22,0x7f,0x22,0x1c])],
    [1062, 1071, bytearray([0x7f,0x40,0x40,0x7f,0xc0,0x7,0x8,0x8,0x8,0x7f,0x7f,0x40,0x78,0x40,0x7f,0x7f,0x40,0x78,0x40,0xff,0x1,0x7f,0x48,0x48,0x30,0x7f,0x48,0x48,0x30,0x7f,0x7f,0x48,0x48,0x48,0x30,0x22,0x41,0x49,0x49,0x3e,0x7f,0x8,0x3e,0x41,0x3e,0x46,0x29,0x19,0x9,0x7f])],
    [1073, 1076, bytearray([0x3c,0x4a,0x4a,0x49,0x31,0x7c,0x54,0x54,0x54,0x28,0x7c,0x4,0x4,0x4,0x0,0xc0,0x78,0x44,0x7c,0xc0])],
    [1078, 1085, bytearray([0x6c,0x10,0x7c,0x10,0x6c,0x28,0x44,0x54,0x54,0x28,0x7c,0x20,0x10,0x8,0x7c,0x7c,0x21,0x12,0x9,0x7c,0x7c,0x10,0x28,0x44,0x0,0x40,0x38,0x4,0x4,0x7c,0x7c,0x8,0x10,0x8,0x7c,0x7c,0x10,0x10,0x10,0x7c])],
    [1087, 1087, bytearray([0x7c,0x4,0x4,0x4,0x7c])],
    [1090, 1090, bytearray([0x4,0x4,0x7c,0x4,0x4])],
    [1092, 1092, bytearray([0x10,0x28,0x7c,0x28,0x10])],
    [1094, 1103, bytearray([0x7c,0x40,0x40,0x7c,0xc0,0xc,0x10,0x10,0x10,0x7c,0x7c,0x40,0x7c,0x40,0x7c,0x7c,0x40,0x7c,0x40,0xfc,0x4,0x7c,0x50,0x50,0x20,0x7c,0x50,0x50,0x20,0x7c,0x7c,0x50,0x50,0x50,0x20,0x28,0x44,0x54,0x54,0x38,0x7c,0x10,0x38,0x44,0x38,0x8,0x54,0x34,0x14,0x7c])],
    [1105, 1105, bytearray([0x38,0x55,0x54,0x55,0x58])]
]


# Прямая замена символов
font_cyrillic_to_sysfont: dict[int, int] = {
    1040: ord("A"), # А
    1042: ord("B"), # В
    1045: ord("E"), # Е
    1025: ord("E"), # Ё
    1050: ord("K"), # К
    1052: ord("M"), # M
    1053: ord("H"), # H
    1054: ord("O"), # O
    1056: ord("P"), # P
    1057: ord("C"), # C
    1058: ord("T"), # T
    1061: ord("X"), # X
    1072: ord("a"), # а
    1077: ord("e"), # е
    1086: ord("o"), # o
    1088: ord("p"), # p
    1089: ord("c"), # c
    1091: ord("y"), # y
    1093: ord("x"), # x
}


sys_start = sysfont["Start"]
sys_end = sysfont["End"]
sys_data = sysfont["Data"]


class Font:
    width = 5
    height = 8

    def get_char(self, ch: str):
        code = ord(ch)

        if code > sys_end:
            alt = font_cyrillic_to_sysfont.get(code)

            if not alt is None:
                code = alt

        width = self.width

        if sys_start <= code <= sys_end:
            ci = (code - sys_start) * width

            return sys_data[ci : ci + width]

        for item in font_cyrillic:
            if item[0] <= code and code <= item[1]:
                ci = (code - item[0]) * width

                return item[2][ci : ci + width]


font = Font()
